(()=>{"use strict";const t=document.querySelector("#table-row-tmp");class e{constructor(e){this.box=document.querySelector(e),this.boxInner=this.box.querySelector(".table__inner"),this.addBtn=this.box.querySelector(".table__btn--add"),this.forms=this.box.querySelectorAll("form"),this.btns=this.boxInner.querySelectorAll("button"),this.x=[],this.y=[],this.listenForms(),this.setIdBtn(),this.addBtn&&this.addBtn.addEventListener("click",(()=>{const e=t.content.cloneNode(!0);this.boxInner.appendChild(e),this.listenForms(),this.setIdBtn()})),this.boxInner.addEventListener("click",(t=>{t.target.classList.contains("js-remove")&&(this.boxInner.removeChild(t.target.parentNode),this.x.splice(t.target.dataset.id,1),this.y.splice(t.target.dataset.id,1),k(),this.setIdBtn())}))}listenForms(){this.forms=this.box.querySelectorAll("form"),this.forms.forEach(((t,e)=>{t.addEventListener("input",(()=>{this.x[e]=t.querySelectorAll("input")[0].value,this.y[e]=t.querySelectorAll("input")[1].value}))}))}setIdBtn(){this.boxInner.querySelectorAll("button").forEach(((t,e)=>{t.dataset.id=e}))}}const l=new e(".table--1"),s=new e(".table--2"),a=document.querySelector(".table--3"),o=document.querySelector("#table-row-tmp--calc"),r=document.querySelector(".chart1"),n=r.querySelector("#chart_1"),i=n.getContext("2d"),c=r.querySelector(".chart__dots-field");i.strokeStyle="#1E2C3D";const h=r.querySelector("#chart_11"),d=h.getContext("2d"),y=r.querySelector(".risks");d.strokeStyle="#C5C5C5";const p=document.querySelector(".chart2"),b=p.querySelector("#chart_2"),u=b.getContext("2d"),m=p.querySelector(".chart__dots-field");u.strokeStyle="#1E2C3D";const x=p.querySelector("#chart_22"),_=x.getContext("2d"),g=p.querySelector(".risks");_.strokeStyle="#C5C5C5";const C=document.querySelector(".chart3"),S=C.querySelector("#chart_3"),M=S.getContext("2d"),q=C.querySelector(".chart__dots-field");M.strokeStyle="#1E2C3D";const v=C.querySelector("#chart_33"),L=v.getContext("2d"),T=C.querySelector(".risks");L.strokeStyle="#C5C5C5";const k=()=>{a.querySelector(".table__result").innerHTML="";let t=l.x.length>=s.x.length?s.x.length:l.x.length;y.innerHTML="",c.innerHTML="";let e=l.x.map(parseFloat).sort(((t,e)=>e-t))[0],r=l.x.map(parseFloat).sort(((t,e)=>t-e))[0],p=Math.abs(e)>Math.abs(r)?Math.abs(e):Math.abs(r),C=l.y.map(parseFloat).sort(((t,e)=>e-t))[0],k=l.y.map(parseFloat).sort(((t,e)=>t-e))[0],E=Math.abs(C)>Math.abs(k)?Math.abs(C):Math.abs(k);g.innerHTML="",m.innerHTML="";let P=s.x.map(parseFloat).sort(((t,e)=>e-t))[0],f=s.x.map(parseFloat).sort(((t,e)=>t-e))[0],F=Math.abs(P)>Math.abs(f)?Math.abs(P):Math.abs(f),w=s.y.map(parseFloat).sort(((t,e)=>e-t))[0],H=s.y.map(parseFloat).sort(((t,e)=>t-e))[0],I=Math.abs(w)>Math.abs(H)?Math.abs(w):Math.abs(H);T.innerHTML="",q.innerHTML="";let $=(e+P)/2,A=(r+f)/2,B=Math.abs($)>Math.abs(A)?Math.abs($):Math.abs(A),R=(C+w)/2,X=(k+H)/2,Y=Math.abs(R)>Math.abs(X)?Math.abs(R):Math.abs(X);i.clearRect(0,0,n.width,n.height),d.clearRect(0,0,h.width,h.height),u.clearRect(0,0,b.width,b.height),_.clearRect(0,0,x.width,x.height),M.clearRect(0,0,S.width,S.height),L.clearRect(0,0,v.width,v.height);for(let e=0;e<t;e++){let t=o.content.cloneNode(!0);t.querySelectorAll("input")[0].value=(+l.x[e]+ +s.x[e])/2,t.querySelectorAll("input")[1].value=(+l.y[e]+ +s.y[e])/2,a.querySelector(".table__result").appendChild(t);let r=document.createElement("div");r.classList.add("chart__dot"),r.style.right=(100-+l.x[e]/(1.1*p)*100)/2+"%",r.style.top=(100-+l.y[e]/(1.1*E)*100)/2+"%";let n=document.createElement("div");n.classList.add("chart__dot-tooltip"),n.innerHTML=`X: ${l.x[e]} <br> Y: ${l.y[e]}`,r.appendChild(n),c.appendChild(r);let h=253-(100-+l.x[e]/(1.1*p)*100)/2/100*253,b=(100-+l.y[e]/(1.1*E)*100)/2/100*253;d.beginPath(),d.moveTo(123,b),d.lineTo(130,b),d.closePath(),d.stroke(),d.beginPath(),d.moveTo(h,123),d.lineTo(h,130),d.closePath(),d.stroke();let x=document.createElement("div");x.classList.add("risks__labelY"),x.style.right="50%",x.style.top=r.style.top,x.textContent=`${l.y[e]}`,y.appendChild(x);let C=document.createElement("div");C.classList.add("risks__labelX"),C.style.right=r.style.right,C.style.top="50%",C.textContent=`${l.x[e]}`,y.appendChild(C),e>0&&(i.lineTo(h,b),i.closePath(),i.stroke()),i.beginPath(),i.moveTo(h,b);let S=document.createElement("div");S.classList.add("chart__dot"),S.style.right=(100-+s.x[e]/(1.1*F)*100)/2+"%",S.style.top=(100-+s.y[e]/(1.1*I)*100)/2+"%";let v=document.createElement("div");v.classList.add("chart__dot-tooltip"),v.innerHTML=`X: ${s.x[e]} <br> Y: ${s.y[e]}`,S.appendChild(v),m.appendChild(S);let k=253-(100-+s.x[e]/(1.1*F)*100)/2/100*253,P=(100-+s.y[e]/(1.1*I)*100)/2/100*253;_.beginPath(),_.moveTo(123,P),_.lineTo(130,P),_.closePath(),_.stroke(),_.beginPath(),_.moveTo(k,123),_.lineTo(k,130),_.closePath(),_.stroke();let f=document.createElement("div");f.classList.add("risks__labelY"),f.style.right="50%",f.style.top=S.style.top,f.textContent=`${s.y[e]}`,g.appendChild(f);let w=document.createElement("div");w.classList.add("risks__labelX"),w.style.right=S.style.right,w.style.top="50%",w.textContent=`${s.x[e]}`,g.appendChild(w),e>0&&(u.lineTo(k,P),u.closePath(),u.stroke()),u.beginPath(),u.moveTo(k,P);let H=document.createElement("div");H.classList.add("chart__dot"),H.style.right=(100-(+l.x[e]+ +s.x[e])/2/(1.1*B)*100)/2+"%",H.style.top=(100-(+l.y[e]+ +s.y[e])/2/(1.1*Y)*100)/2+"%";let $=document.createElement("div");$.classList.add("chart__dot-tooltip"),$.innerHTML=`X: ${(+l.x[e]+ +s.x[e])/2} <br> Y: ${(+l.y[e]+ +s.y[e])/2}`,H.appendChild($),q.appendChild(H);let A=253-(100-(+l.x[e]+ +s.x[e])/2/(1.1*B)*100)/2/100*253,R=(100-(+l.y[e]+ +s.y[e])/2/(1.1*Y)*100)/2/100*253;L.beginPath(),L.moveTo(123,R),L.lineTo(130,R),L.closePath(),L.stroke(),L.beginPath(),L.moveTo(A,123),L.lineTo(A,130),L.closePath(),L.stroke();let X=document.createElement("div");X.classList.add("risks__labelY"),X.style.right="50%",X.style.top=H.style.top,X.textContent=""+(+l.y[e]+ +s.y[e])/2,T.appendChild(X);let D=document.createElement("div");D.classList.add("risks__labelX"),D.style.right=H.style.right,D.style.top="50%",D.textContent=""+(+l.x[e]+ +s.x[e])/2,T.appendChild(D),e>0&&(M.lineTo(A,R),M.closePath(),M.stroke()),M.beginPath(),M.moveTo(A,R)}};a.addEventListener("click",(function(t){t.target.classList.contains("table__btn--calc")&&k()}))})();